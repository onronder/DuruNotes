{
  "version": 1,
  "workflows": [
    {
      "name": "Duru Notes CI/CD",
      "description": "Build and deploy Duru Notes to TestFlight",
      "branch": "main",
      "actions": [
        {
          "name": "Build iOS App",
          "scheme": "Runner",
          "platform": "iOS",
          "configuration": "Release",
          "destination": "generic/platform=iOS",
          "archiveExportMethod": "app-store"
        }
      ],
      "environment": {
        "FLUTTER_VERSION": "3.35.2",
        "COCOAPODS_PARALLEL_CODE_SIGN": "true",
        "COCOAPODS_DISABLE_STATS": "true",
        "TREE_SHAKE_ICONS": "false",
        "FLUTTER_BUILD_MODE": "release",
        "CI": "true",
        "XCODE_CLOUD": "true",
        "FLUTTER_ROOT": "/Users/local/flutter"
      },
      "steps": [
        {
          "name": "Install Flutter & Dependencies",
          "script": "ci_scripts/ci_pre_xcodebuild.sh"
        }
      ],
      "post_actions": [
        {
          "name": "Post-build Verification",
          "script": "ci_scripts/ci_post_xcodebuild.sh"
        }
      ]
    }
  ]
}
